<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta property="wb:webmaster" content="65a151beb5e21880" />
	<!-- baidu analytics-->
	<script>
		var _hmt = _hmt || [];
		(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?09df6a0c610161ab3099d8e11e9c998e";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>
	<!-- google analytics-->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-86667923-1', 'auto');
		ga('send', 'pageview');
	</script>
	
	<title>前端编码规范 3 —— JavaScript 规范 | Bevis Blog - 沈浩个人博客</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="原文：Web Styleguide – Style guide to harmonize HTML, Javascript and CSS / SASS coding style">
<meta property="og:type" content="article">
<meta property="og:title" content="前端编码规范 3 —— JavaScript 规范">
<meta property="og:url" content="https://utopia1991.github.io/2016/12/21/codeStyle3/index.html">
<meta property="og:site_name" content="Bevis Blog - 沈浩个人博客">
<meta property="og:description" content="原文：Web Styleguide – Style guide to harmonize HTML, Javascript and CSS / SASS coding style">
<meta property="og:image" content="https://utopia1991.github.io/images/codeStyle/3.png">
<meta property="og:updated_time" content="2016-12-21T09:00:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端编码规范 3 —— JavaScript 规范">
<meta name="twitter:description" content="原文：Web Styleguide – Style guide to harmonize HTML, Javascript and CSS / SASS coding style">
<meta name="twitter:image" content="https://utopia1991.github.io/images/codeStyle/3.png">
	
	
		<link rel="icon" href="https://utopia1991.github.io/css/images/icon.png">
	
	
		<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
	
	<link rel="stylesheet" href="/css/style.css">
	

	<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
</head>

<body>
	<a href="https://github.com/utopia1991" target="_blank" class="githubFork">
		<img src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png">
	</a>
	<a class="backTop" onclick="backTop()">Top</a>
	<div id="container">
		<div id="wrap">
			<header id="header">
	<div id="header-outer" class="outer">
		<div id="header-title" class="inner">
			<h1 id="logo-wrap">
				<a href="/" id="logo">
					<span class="brand-logo">Bevis</span>
					Blog
				</a>
			</h1>
		</div>
		<div id="header-inner" class="inner">
			<nav id="main-nav">
				<a id="main-nav-toggle" class="nav-icon"></a>
				
					<a class="main-nav-link" href="/">主页</a>
				
					<a class="main-nav-link" href="/archives">博文</a>
				
				<a class="main-nav-link" href="https://utopia1991.github.io/p/about/index.html">关于我</a>
			</nav>
		</div>
	</div>
</header>

			<canvas width="100%" height="100%" id="canvas"></canvas>
			<div class="outer">
				
				<aside id="sidebar">
	<div class="aside-author">
		<a class="aside-logo" href="https://utopia1991.github.io/p/lover/index.html" target="_blank"></a>
		<p class="aside-title">Bevis Shen（沈浩）</p>
		<p class="aside-subtitle">Node.js & Front-End Engineer</p>
		<p class="aside-description">Google 重度粉，Mac 拥趸，前端 + Node 青年，对前沿技术有着狂热的激情，梦想环游世界，热爱生活、摄影、旅游、电影的文艺程序猿一枚</p>
		<div class="aside-communicate">
			<a href="https://github.com/utopia1991" target="_blank" class="article-share-github" title="github"></a>
			<a href="https://www.linkedin.com/in/bevis1991" target="_blank" class="article-share-linkedin" title="linkedin"></a>
			<a href="mailto:1304354608@qq.com" class="article-share-mail" title="email"></a>
			<a href="https://weibo.com/u/2619492527/home" target="_blank" class="article-share-weibo" title="weibo"></a>
			<a class="article-share-weixin" title="我的个人微信公众号"></a>
			<img src="https://utopia1991.github.io/css/images/wechat.png" width="180" height="180" class="wechat-pic">
			<a href="https://bevis1991.wordpress.com/" target="_blank" class="article-share-wordpress" title="WordPress 博客"></a>
			<a href="https://www.facebook.com/bevis1991" target="_blank" class="article-share-facebook" title="facebook"></a>
			<a href="https://twitter.com/bevis_shen" target="_blank" class="article-share-twitter" title="twitter"></a>
		</div>
	</div>
	
		

	
		
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code-Style/">Code Style</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coffeescript/">Coffeescript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/">Google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gulp/">Gulp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Interview-Questions/">Interview-Questions</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/">MongoDB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UnderscoreJS/">UnderscoreJS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodeJs/">nodeJs</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


	
		
  <div class="widget-wrap">
    <h3 class="widget-title">Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Code-Style/" style="font-size: 17.5px;">Code Style</a> <a href="/tags/Coffeescript/" style="font-size: 10px;">Coffeescript</a> <a href="/tags/Google/" style="font-size: 10px;">Google</a> <a href="/tags/Gulp/" style="font-size: 10px;">Gulp</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Interview-Questions/" style="font-size: 15px;">Interview-Questions</a> <a href="/tags/Javascript/" style="font-size: 20px;">Javascript</a> <a href="/tags/Mac/" style="font-size: 12.5px;">Mac</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 12.5px;">MongoDB</a> <a href="/tags/UnderscoreJS/" style="font-size: 12.5px;">UnderscoreJS</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/nodeJs/" style="font-size: 10px;">nodeJs</a>
    </div>
  </div>

	
		
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">11</span></li></ul>
    </div>
  </div>


	
		
	<div class="widget-wrap">
		<h3 class="widget-title">最新文章</h3>
		<div class="widget">
			<ul>
				
					<li>
						<a href="/2017/03/23/learnSource/">
							做为优秀前端的必备学习资料
						</a>
					</li>
					
					<li>
						<a href="/2017/03/10/source/">
							超全 web 开发工具和资源
						</a>
					</li>
					
					<li>
						<a href="/2017/02/15/jsBug/">
							Javascript 设计缺陷
						</a>
					</li>
					
					<li>
						<a href="/2017/01/03/gulp/">
							Gulp 快速入门
						</a>
					</li>
					
					<li>
						<a href="/2016/12/27/feTired/">
							前端疲劳
						</a>
					</li>
					
					<li>
						<a href="/2016/12/27/reduceCoupling/">
							减少前端代码耦合
						</a>
					</li>
					
					<li>
						<a href="/2016/12/21/codeStyle4/">
							前端编码规范 4 —— CSS 和 SASS 规范
						</a>
					</li>
					
					<li>
						<a href="/2016/12/21/codeStyle3/">
							前端编码规范 3 —— JavaScript 规范
						</a>
					</li>
					
					<li>
						<a href="/2016/12/21/codeStyle2/">
							前端编码规范 2 —— HTML 规范
						</a>
					</li>
					
					<li>
						<a href="/2016/12/21/codeStyle1/">
							前端编码规范 1 —— 一般规范
						</a>
					</li>
					
					<li>
						<a href="/2016/12/16/underscore2/">
							UnderscoreJS 常用方法
						</a>
					</li>
					
					<li>
						<a href="/2016/12/15/interview3/">
							JavaScript 单线程机制面试题
						</a>
					</li>
					
					<li>
						<a href="/2016/12/14/vue/">
							Vue 基础学习笔记
						</a>
					</li>
					
					<li>
						<a href="/2016/12/13/mongodb/">
							MongoDB 操作基础语法（shell）
						</a>
					</li>
					
					<li>
						<a href="/2016/12/13/eventLoop/">
							JavaScript 运行机制
						</a>
					</li>
					
					<li>
						<a href="/2016/12/12/deferred/">
							jQuery $.deferred()对象
						</a>
					</li>
					
					<li>
						<a href="/2016/11/25/nodemailer/">
							使用 nodeJs 发送邮件
						</a>
					</li>
					
					<li>
						<a href="/2016/11/25/google/">
							教你使用 Google
						</a>
					</li>
					
					<li>
						<a href="/2016/11/23/interview2/">
							20个JS变态面试题解析
						</a>
					</li>
					
					<li>
						<a href="/2016/11/23/bem/">
							BEM - CSS命名规则
						</a>
					</li>
					
				......
			</ul>
		</div>
	</div>
	

	
</aside>

				
				<section id="main">
					<div class="main-header">
						<p class="header-title">Any application that can be written in JavaScript, will eventually be written in JavaScript.</p>
						<canvas id="bubbleCanvas" width="100%" height="300" style="margin-top:50px;"></canvas>
						<script>
							(function(){
								var width, height, canvas, ctx, circles;
								function initHeader() {
									try{
										canvas = document.getElementById('bubbleCanvas');
										if($("#bubbleCanvas").length>0){
											width = window.innerWidth*0.25>300?window.innerWidth*0.25:300;
											//height = window.innerHeight;
											height = 255;
											canvas.width = width;
											canvas.height = height;
											ctx = canvas.getContext('2d');
											circles = [];
											for(var x = 0; x < width*0.5; x++) {
												var c = new Circle();
												circles.push(c);
											}
											animate();
										}
									} catch(ex) {
										if(window.cosole&&window.cosole.log){cosole.log(ex)}
									}
								}
								function addListeners() {
									try{
										if($("#bubbleCanvas").length>0){
											window.addEventListener('resize', resize);
										}
									}catch(ex){if(window.cosole&&window.cosole.log){cosole.log(ex)}}
								}
								function resize() {
									width = window.innerWidth*0.25>300?window.innerWidth*0.25:300;
									height = window.innerHeight;
									canvas.width = width;
									canvas.height = height;
								}
								function animate() {
									ctx.clearRect(0,0,width,height);
									for(var i in circles) {
										circles[i].draw();
									}
									window.requestAFrame = (function () {
										return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
											function (callback) {
												return window.setTimeout(callback, 1000 / 60); // shoot for 60 fps
											};
									})();
									requestAFrame(animate);
								}
								// Canvas manipulation
								function Circle() {
									var _this = this;
									// constructor
									(function() {
										_this.pos = {};
										init();
									})();

									function init() {
										_this.pos.x = Math.random()*width;
										_this.pos.y = height+Math.random()*100;
										_this.alpha = 0.1+Math.random()*0.3;
										_this.scale = 0.1+Math.random()*0.3;
										_this.velocity = Math.random();
									}

									this.draw = function() {
										if(_this.alpha <= 0) {
											init();
										}
										_this.pos.y -= _this.velocity;
										_this.alpha -= 0.0005;
										ctx.beginPath();
										ctx.arc(_this.pos.x, _this.pos.y, _this.scale*10, 0, 2 * Math.PI, false);
										ctx.fillStyle = 'rgba(255,255,255,'+ _this.alpha+')';
										ctx.fill();
									};
								}
								initHeader();
								addListeners();
							}());
						</script>
					</div>
					<article id="post-codeStyle3" class="article article-type-post" itemscope itemprop="blogPost">
	<div class="article-meta">
		
	</div>
	<div class="article-inner">
		
		
			<header class="article-header">
				
	
		<h1 class="article-title" itemprop="name">
			前端编码规范 3 —— JavaScript 规范
		</h1>
	


				<a href="/2016/12/21/codeStyle3/" class="article-date">
  <time datetime="2016-12-21T07:03:35.000Z" itemprop="datePublished">2016-12-21</time>
</a>
			</header>
		
		<div class="article-entry" itemprop="articleBody">
			
				<p><img src="/images/codeStyle/3.png" alt=""></p>
<p>原文：<a href="https://github.com/gionkunz/chartist-js/blob/develop/CODINGSTYLE.md" target="_blank" rel="external">Web Styleguide – Style guide to harmonize HTML, Javascript and CSS / SASS coding style</a></p>
<a id="more"></a>
<p>系列文章</p>
<ul>
<li><a href="//utopia1991.github.io/2016/12/21/codeStyle1/">前端编码规范 1 —— 一般规范</a></li>
<li><a href="//utopia1991.github.io/2016/12/21/codeStyle2/">前端编码规范 2 —— HTML 规范</a></li>
<li><a href="//utopia1991.github.io/2016/12/21/codeStyle3/">前端编码规范 3 —— JavaScript 规范</a></li>
<li><a href="//utopia1991.github.io/2016/12/21/codeStyle4/">前端编码规范 4 —— CSS 和 Sass (SCSS) 规范</a></li>
</ul>
<h3 id="JavaScript-规范"><a href="#JavaScript-规范" class="headerlink" title="JavaScript 规范"></a>JavaScript 规范</h3><h4 id="全局命名空间污染与-IIFE"><a href="#全局命名空间污染与-IIFE" class="headerlink" title="全局命名空间污染与 IIFE"></a>全局命名空间污染与 IIFE</h4><p>总是将代码包裹成一个 IIFE(Immediately-Invoked Function Expression) 即（立即执行的函数表达式），用以创建独立隔绝的定义域。这一举措可防止全局命名空间被污染。</p>
<p>IIFE 还可确保你的代码不会轻易被其它全局命名空间里的代码所修改（i.e. 第三方库，window 引用，被覆盖的未定义的关键字等等）。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">10</span>,</div><div class="line">    y = <span class="number">100</span>;</div><div class="line"><span class="comment">// Declaring variables in the global scope is resulting in global scope pollution.</span></div><div class="line"><span class="comment">// All variables declared like this</span></div><div class="line"><span class="comment">// will be stored in the window object. This is very unclean and needs to be avoided.</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.x + <span class="string">' '</span> + <span class="built_in">window</span>.y);</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// We declare a IIFE and pass parameters into the function</span></div><div class="line"><span class="comment">// that we will use from the global space</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log, w, undefined</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="keyword">var</span> x = <span class="number">10</span>,</div><div class="line">      y = <span class="number">100</span>;</div><div class="line">  <span class="comment">// Will output 'true true'</span></div><div class="line">  log((w.x === <span class="literal">undefined</span>) + <span class="string">' '</span> + (w.y === <span class="literal">undefined</span>));</div><div class="line">&#125;(<span class="built_in">window</span>.console.log, <span class="built_in">window</span>));</div></pre></td></tr></table></figure>
<p>无论何时，想要创建一个新的封闭的定义域，那就用 IIFE。它不仅避免了干扰，也使得内存在执行完后立即释放。所有脚本文件建议都从 IIFE 开始。</p>
<p>立即执行的函数表达式的执行括号应该写在外包括号内。虽然写在内还是写在外都是有效的，但写在内使得整个表达式看起来更像一个整体，因此推荐这么做。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)();</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;());</div></pre></td></tr></table></figure>
<p>so，用下列写法来格式化你的 IIFE 代码：</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="comment">// Code goes here</span></div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>如果你想引用全局变量或者是外层 IIFE 的变量，可以通过下列方式传参：</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$, w, d</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    w.alert(d.querySelectorAll(<span class="string">'div'</span>).length);</div><div class="line">  &#125;);</div><div class="line">&#125;(jQuery, <span class="built_in">window</span>, <span class="built_in">document</span>));</div></pre></td></tr></table></figure>
<h4 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h4><p>ECMAScript 5 严格模式可在整个脚本或独个方法内被激活。它对应不同的 javascript 语境会做更加严格的错误检查。严格模式也确保了 javascript 代码更加的健壮，运行的也更加快速。</p>
<p>严格模式会阻止使用在未来很可能被引入的预留关键字。</p>
<p>你应该在你的脚本中启用严格模式，最好是在独立的 IIFE 中应用它。避免在你的脚本第一行使用它而导致你的所有脚本都启动了严格模式，这有可能会引发一些第三方类库的问题。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Script starts here</span></div><div class="line"><span class="meta">'use strict'</span>;</div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">// Your code starts here</span></div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>推荐</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">js 代码:</div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="comment">// Your code starts here</span></div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h4 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h4><p>总是使用 var 来声明变量。如不指定 var，变量将被隐式地声明为全局变量，这将对变量难以控制。如果没有声明，变量处于什么定义域就变得不清（可以是在 Document 或 Window 中，也可以很容易地进入本地定义域）。所以，请总是使用 var 来声明变量。</p>
<p>采用严格模式带来的好处是，当你手误输入错误的变量名时，它可以通过报错信息来帮助你定位错误出处。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x = <span class="number">10</span>;</div><div class="line">y = <span class="number">100</span>;</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">10</span>,</div><div class="line">    y = <span class="number">100</span>;</div></pre></td></tr></table></figure>
<h4 id="理解-JavaScript-的定义域和定义域提升"><a href="#理解-JavaScript-的定义域和定义域提升" class="headerlink" title="理解 JavaScript 的定义域和定义域提升"></a>理解 JavaScript 的定义域和定义域提升</h4><p>在 JavaScript 中变量和方法定义会自动提升到执行之前。JavaScript 只有 function 级的定义域，而无其他很多编程语言中的块定义域，所以使得你在某一 function 内的某语句和循环体中定义了一个变量，此变量可作用于整个 function 内，而不仅仅是在此语句或循环体中，因为它们的声明被 JavaScript 自动提升了。</p>
<p>我们通过例子来看清楚这到底是怎么一回事：</p>
<p>原 function</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; a; i++) &#123;</div><div class="line">    <span class="keyword">var</span> b = i * i;</div><div class="line">    log(b);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span>(a === <span class="number">10</span>) &#123;</div><div class="line">    <span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      log(a);</div><div class="line">    &#125;;</div><div class="line">    f();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    log(<span class="string">'Mr. X!'</span>);</div><div class="line">  &#125;</div><div class="line">  x();</div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<p>被 JS 提升过后</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="comment">// All variables used in the closure will be hoisted to the top of the function</span></div><div class="line">  <span class="keyword">var</span> a,</div><div class="line">      i,</div><div class="line">      b,</div><div class="line">      f;</div><div class="line">  <span class="comment">// All functions in the closure will be hoisted to the top</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    log(<span class="string">'Mr. X!'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  a = <span class="number">10</span>;</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; a; i++) &#123;</div><div class="line">    b = i * i;</div><div class="line">    log(b);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span>(a === <span class="number">10</span>) &#123;</div><div class="line">  <span class="comment">// Function assignments will only result in hoisted variables, Only by using a real function declaration the whole function</span></div><div class="line">    f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      log(a);</div><div class="line">    &#125;;</div><div class="line">    f();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  x();</div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<p>只有良好的声明习惯，也就是下一章节我们要提到的声明规则，才能尽可能的避免这类错误风险。</p>
<h4 id="提升声明"><a href="#提升声明" class="headerlink" title="提升声明"></a>提升声明</h4><p>为避免上一章节所述的变量和方法定义被自动提升造成误解，把风险降到最低，我们应该手动地显示地去声明变量与方法。也就是说，所有的变量以及方法，应当定义在 function 内的首行。</p>
<p>只用一个 var 关键字声明，多个变量用逗号隔开。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line">  <span class="keyword">var</span> b = <span class="number">10</span>;</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">    <span class="keyword">var</span> c = a * b * i;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> d = <span class="number">100</span>;</div><div class="line">  <span class="keyword">var</span> x = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> d * d;</div><div class="line">  &#125;;</div><div class="line">  log(x());</div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">10</span>,</div><div class="line">      b = <span class="number">10</span>,</div><div class="line">      i,</div><div class="line">      c,</div><div class="line">      d,</div><div class="line">      x;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">    c = a * b * i;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  d = <span class="number">100</span>;</div><div class="line">  x = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> d * d;</div><div class="line">  &#125;;</div><div class="line">  log(x());</div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<p>把赋值尽量写在变量申明中。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a,</div><div class="line">    b,</div><div class="line">    c;</div><div class="line"></div><div class="line">a = <span class="number">10</span>;</div><div class="line">b = <span class="number">10</span>;</div><div class="line">c = <span class="number">100</span>;</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>,</div><div class="line">    b = <span class="number">10</span>,</div><div class="line">    c = <span class="number">100</span>;</div></pre></td></tr></table></figure>
<h4 id="使用带类型判断的比较判断"><a href="#使用带类型判断的比较判断" class="headerlink" title="使用带类型判断的比较判断"></a>使用带类型判断的比较判断</h4><p>总是使用 === 精确的比较操作符，避免在判断的过程中，由 JavaScript 的强制类型转换所造成的困扰。</p>
<p>如果你使用 === 操作符，那比较的双方必须是同一类型为前提的条件下才会有效。</p>
<p>如果你想了解更多关于强制类型转换的信息，你可以读一读 <a href="http://dmitrysoshnikov.com/notes/note-2-ecmascript-equality-operators/" target="_blank" rel="external">Dmitry Soshnikov 的这篇文章</a>。</p>
<p>在只使用 == 的情况下，JavaScript 所带来的强制类型转换使得判断结果跟踪变得复杂，下面的例子可以看出这样的结果有多怪了：</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  log(<span class="string">'0'</span> == <span class="number">0</span>); <span class="comment">// true</span></div><div class="line">  log(<span class="string">''</span> == <span class="literal">false</span>); <span class="comment">// true</span></div><div class="line">  log(<span class="string">'1'</span> == <span class="literal">true</span>); <span class="comment">// true</span></div><div class="line">  log(<span class="literal">null</span> == <span class="literal">undefined</span>); <span class="comment">// true</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> x = &#123;</div><div class="line">    <span class="attr">valueOf</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="string">'X'</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  log(x == <span class="string">'X'</span>);</div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<h4 id="明智地使用真假判断"><a href="#明智地使用真假判断" class="headerlink" title="明智地使用真假判断"></a>明智地使用真假判断</h4><p>当我们在一个 if 条件语句中使用变量或表达式时，会做真假判断。if(a == true) 是不同于 if(a) 的。后者的判断比较特殊，我们称其为真假判断。这种判断会通过特殊的操作将其转换为 true 或 false，下列表达式统统返回 false：false, 0, undefined, null, NaN, ‘’（空字符串）.</p>
<p>这种真假判断在我们只求结果而不关心过程的情况下，非常的有帮助。</p>
<p>以下示例展示了真假判断是如何工作的：</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">logTruthyFalsy</span>(<span class="params">expr</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(expr) &#123;</div><div class="line">      log(<span class="string">'truthy'</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      log(<span class="string">'falsy'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  logTruthyFalsy(<span class="literal">true</span>); <span class="comment">// truthy</span></div><div class="line">  logTruthyFalsy(<span class="number">1</span>); <span class="comment">// truthy</span></div><div class="line">  logTruthyFalsy(&#123;&#125;); <span class="comment">// truthy</span></div><div class="line">  logTruthyFalsy([]); <span class="comment">// truthy</span></div><div class="line">  logTruthyFalsy(<span class="string">'0'</span>); <span class="comment">// truthy</span></div><div class="line"></div><div class="line">  logTruthyFalsy(<span class="literal">false</span>); <span class="comment">// falsy</span></div><div class="line">  logTruthyFalsy(<span class="number">0</span>); <span class="comment">// falsy</span></div><div class="line">  logTruthyFalsy(<span class="literal">undefined</span>); <span class="comment">// falsy</span></div><div class="line">  logTruthyFalsy(<span class="literal">null</span>); <span class="comment">// falsy</span></div><div class="line">  logTruthyFalsy(<span class="literal">NaN</span>); <span class="comment">// falsy</span></div><div class="line">  logTruthyFalsy(<span class="string">''</span>); <span class="comment">// falsy</span></div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<h4 id="变量赋值时的逻辑操作"><a href="#变量赋值时的逻辑操作" class="headerlink" title="变量赋值时的逻辑操作"></a>变量赋值时的逻辑操作</h4><p>逻辑操作符 || 和 &amp;&amp; 也可被用来返回布尔值。如果操作对象为非布尔对象，那每个表达式将会被自左向右地做真假判断。基于此操作，最终总有一个表达式被返回回来。这在变量赋值时，是可以用来简化你的代码的。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!x) &#123;</div><div class="line">  <span class="keyword">if</span>(!y) &#123;</div><div class="line">    x = <span class="number">1</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    x = y;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x = x || y || <span class="number">1</span>;</div></pre></td></tr></table></figure>
<p>这一小技巧经常用来给方法设定默认的参数。</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">    a = a || <span class="number">1</span>;</div><div class="line">    b = b || <span class="number">1</span>;</div><div class="line"></div><div class="line">    log(<span class="string">'Result '</span> + a * b);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  multiply(); <span class="comment">// Result 1</span></div><div class="line">  multiply(<span class="number">10</span>); <span class="comment">// Result 10</span></div><div class="line">  multiply(<span class="number">3</span>, <span class="literal">NaN</span>); <span class="comment">// Result 3</span></div><div class="line">  multiply(<span class="number">9</span>, <span class="number">5</span>); <span class="comment">// Result 45</span></div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<h4 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h4><p>总是使用分号，因为隐式的代码嵌套会引发难以察觉的问题。当然我们更要从根本上来杜绝这些问题。以下几个示例展示了缺少分号的危害：</p>
<p>JavaScript 中语句要以分号结束，否则它将会继续执行下去，不管换不换行。以上的每一个示例中，函数声明或对象或数组，都变成了在一句语句体内。要知道闭合圆括号并不代表语句结束，JavaScript 不会终结语句，除非它的下一个 token 是一个中缀符[1] 或者是圆括号操作符。</p>
<h4 id="嵌套函数"><a href="#嵌套函数" class="headerlink" title="嵌套函数"></a>嵌套函数</h4><p>嵌套函数是非常有用的，比如用在持续创建和隐藏辅助函数的任务中。你可以非常自由随意地使用它们。</p>
<p>语句块内的函数声明</p>
<p>切勿在语句块内声明函数，在 ECMAScript 5 的严格模式下，这是不合法的。函数声明应该在定义域的顶层。但在语句块内可将函数申明转化为函数表达式赋值给变量。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (x) &#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (x) &#123;</div><div class="line">  <span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h4><p>基本上你无法避免出现异常，特别是在做大型开发时（使用应用开发框架等等）。</p>
<p>在没有自定义异常的情况下，从有返回值的函数中返回错误信息一定非常的棘手，更别提多不优雅了。不好的解决方案包括了传第一个引用类型来接纳错误信息，或总是返回一个对象列表，其中包含着可能的错误对象。以上方式基本上是比较简陋的异常处理方式。适时可做自定义异常处理。</p>
<p>在复杂的环境中，你可以考虑抛出对象而不仅仅是字符串（默认的抛出值）。</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(name === <span class="literal">undefined</span>) &#123;</div><div class="line">  <span class="keyword">throw</span> &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'System Error'</span>,</div><div class="line">    <span class="attr">message</span>: <span class="string">'A name should always be specified!'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="标准特性"><a href="#标准特性" class="headerlink" title="标准特性"></a>标准特性</h4><p>总是优先考虑使用标准特性。为了最大限度地保证扩展性与兼容性，总是首选标准的特性，而不是非标准的特性（例如：首选 string.charAt(3) 而不是 string[3]；首选 DOM 的操作方法来获得元素引用，而不是某一应用特定的快捷方法）。</p>
<h4 id="简易的原型继承"><a href="#简易的原型继承" class="headerlink" title="简易的原型继承"></a>简易的原型继承</h4><p>如果你想在 JavaScript 中继承你的对象，请遵循一个简易的模式来创建此继承。如果你预计你会遇上复杂对象的继承，那可以考虑采用一个继承库，比如 Proto.js by Axel Rauschmayer.</p>
<p>简易继承请用以下方式：</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line"></div><div class="line">  <span class="comment">// Constructor function</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Apple</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// Defining a method of apple</span></div><div class="line">  Apple.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    log(<span class="string">'Eating '</span> + <span class="keyword">this</span>.name);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="comment">// Constructor function</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">GrannySmithApple</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Invoking parent constructor</span></div><div class="line">    Apple.prototype.constructor.call(<span class="keyword">this</span>, <span class="string">'Granny Smith'</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// Set parent prototype while creating a copy with Object.create</span></div><div class="line">  GrannySmithApple.prototype = <span class="built_in">Object</span>.create(Apple.prototype);</div><div class="line">  <span class="comment">// Set constructor to the sub type, otherwise points to Apple</span></div><div class="line">  GrannySmithApple.prototype.constructor = GrannySmithApple;</div><div class="line"></div><div class="line">  <span class="comment">// Calling a super method</span></div><div class="line">  GrannySmithApple.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Be sure to apply it onto our current object with call(this)</span></div><div class="line">    Apple.prototype.eat.call(<span class="keyword">this</span>);</div><div class="line">    log(<span class="string">'Poor Grany Smith'</span>);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="comment">// Instantiation</span></div><div class="line">  <span class="keyword">var</span> apple = <span class="keyword">new</span> Apple(<span class="string">'Test Apple'</span>);</div><div class="line">  <span class="keyword">var</span> grannyApple = <span class="keyword">new</span> GrannySmithApple();</div><div class="line"></div><div class="line">  log(apple.name); <span class="comment">// Test Apple</span></div><div class="line">  log(grannyApple.name); <span class="comment">// Granny Smith</span></div><div class="line"></div><div class="line">  <span class="comment">// Instance checks</span></div><div class="line">  log(apple <span class="keyword">instanceof</span> Apple); <span class="comment">// true</span></div><div class="line">  log(apple <span class="keyword">instanceof</span> GrannySmithApple); <span class="comment">// false</span></div><div class="line"></div><div class="line">  log(grannyApple <span class="keyword">instanceof</span> Apple); <span class="comment">// true</span></div><div class="line">  log(grannyApple <span class="keyword">instanceof</span> GrannySmithApple); <span class="comment">// true</span></div><div class="line"></div><div class="line">  <span class="comment">// Calling method that calls super method</span></div><div class="line">  grannyApple.eat(); <span class="comment">// Eating Granny Smith\nPoor Grany Smith</span></div><div class="line"></div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<h4 id="使用闭包"><a href="#使用闭包" class="headerlink" title="使用闭包"></a>使用闭包</h4><p>闭包的创建也许是 JS 最有用也是最易被忽略的能力了。关于闭包如何工作的合理解释。</p>
<p>切勿在循环中创建函数</p>
<p>在简单的循环语句中加入函数是非常容易形成闭包而带来隐患的。下面的例子就是一个典型的陷阱：</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log, w</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="comment">// numbers and i is defined in the current function closure</span></div><div class="line">  <span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">      i;</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; numbers.length; i++) &#123;</div><div class="line">    w.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// At the moment when this gets executed the i variable,</span></div><div class="line">    <span class="comment">// coming from the outer function scope</span></div><div class="line">    <span class="comment">// is set to 3 and the current program is alerting the message 3 times</span></div><div class="line">    <span class="comment">// 'Index 3 with number undefined</span></div><div class="line">    <span class="comment">// If you understand closures in javascript you know how to deal with those cases</span></div><div class="line">    <span class="comment">// It's best to just avoid functions</span></div><div class="line">    <span class="comment">// new closures in loops as this prevents those issues</span></div><div class="line">      w.alert(<span class="string">'Index '</span> + i + <span class="string">' with number '</span> + numbers[i]);</div><div class="line">    &#125;, <span class="number">0</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;(<span class="built_in">window</span>.console.log, <span class="built_in">window</span>));</div></pre></td></tr></table></figure>
<p>接下来的改进虽然已经解决了上述例子中的问题或 bug，但还是违反了不在循环中创建函数或闭包的原则。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log, w</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line"></div><div class="line">  <span class="comment">// numbers and i is defined in the current function closure</span></div><div class="line">  <span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">      i;</div><div class="line"></div><div class="line">  <span class="comment">// Create a function outside of the loop that will accept arguments to create a</span></div><div class="line">  <span class="comment">// function closure scope. This function will return a function that executes in this</span></div><div class="line">  <span class="comment">// closure parent scope.</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">alertIndexWithNumber</span>(<span class="params">index, number</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      w.alert(<span class="string">'Index '</span> + index + <span class="string">' with number '</span> + number);</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// First parameter is a function call that returns a function.</span></div><div class="line">  <span class="comment">// This solves our problem and we don't create a function inside our loop</span></div><div class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; numbers.length; i++) &#123;</div><div class="line">    w.setTimeout(alertIndexWithNumber(i, numbers[i]), <span class="number">0</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;(<span class="built_in">window</span>.console.log, <span class="built_in">window</span>));</div></pre></td></tr></table></figure>
<p>将循环语句转换为函数执行的方式问题能得到立马解决，每一次循环都会对应地创建一次闭包。函数式的风格更加值得推荐，而且看上去也更加地自然和可预料。</p>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log, w</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="comment">// numbers and i is defined in the current function closure</span></div><div class="line">  <span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">      i;</div><div class="line"></div><div class="line">  numbers.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">number, index</span>) </span>&#123;</div><div class="line">    w.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      w.alert(<span class="string">'Index '</span> + index + <span class="string">' with number '</span> + number);</div><div class="line">    &#125;, <span class="number">0</span>);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">&#125;(<span class="built_in">window</span>.console.log, <span class="built_in">window</span>));</div></pre></td></tr></table></figure>
<h4 id="eval-函数（魔鬼）"><a href="#eval-函数（魔鬼）" class="headerlink" title="eval 函数（魔鬼）"></a>eval 函数（魔鬼）</h4><p>eval() 不但混淆语境还很危险，总会有比这更好、更清晰、更安全的另一种方案来写你的代码，因此尽量不要使用 evil 函数。</p>
<h4 id="this-关键字"><a href="#this-关键字" class="headerlink" title="this 关键字"></a>this 关键字</h4><p>只在对象构造器、方法和在设定的闭包中使用 this 关键字。this 的语义在此有些误导。它时而指向全局对象（大多数时），时而指向调用者的定义域（在 eval 中），时而指向 DOM 树中的某一节点（当用事件处理绑定到 HTML 属性上时），时而指向一个新创建的对象（在构造器中），还时而指向其它的一些对象（如果函数被 call() 和 apply() 执行和调用时）。</p>
<p>正因为它是如此容易地被搞错，请限制它的使用场景：</p>
<ul>
<li>在构造函数中</li>
<li>在对象的方法中（包括由此创建出的闭包内）</li>
</ul>
<h4 id="首选函数式风格"><a href="#首选函数式风格" class="headerlink" title="首选函数式风格"></a>首选函数式风格</h4><p>函数式编程让你可以简化代码并缩减维护成本，因为它容易复用，又适当地解耦和更少的依赖。</p>
<p>接下来的例子中，在一组数字求和的同一问题上，比较了两种解决方案。第一个例子是经典的程序处理，而第二个例子则是采用了函数式编程和 ECMA Script 5.1 的数组方法。</p>
<p>例外：往往在重代码性能轻代码维护的情况之下，要选择最优性能的解决方案而非维护性高的方案（比如用简单的循环语句代替 forEach）。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">100</span>, <span class="number">20</span>],</div><div class="line">      sum = <span class="number">0</span>,</div><div class="line">      i;</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">    sum += arr[i];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  log(<span class="string">'The sum of array '</span> + arr + <span class="string">' is: '</span> + sum)</div><div class="line"></div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">100</span>, <span class="number">20</span>];</div><div class="line"></div><div class="line">  <span class="keyword">var</span> sum = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">prevValue, currentValue</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> prevValue + currentValue;</div><div class="line">  &#125;, <span class="number">0</span>);</div><div class="line"></div><div class="line">  log(<span class="string">'The sum of array '</span> + arr + <span class="string">' is: '</span> + sum);</div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<h4 id="使用-ECMA-Script-5"><a href="#使用-ECMA-Script-5" class="headerlink" title="使用 ECMA Script 5"></a>使用 ECMA Script 5</h4><p>建议使用 ECMA Script 5 中新增的语法糖和函数。这将简化你的程序，并让你的代码更加灵活和可复用。</p>
<p>数组和对象的属性迭代</p>
<p>用 ECMA5 的迭代方法来迭代数组。使用 Array.forEach 或者如果你要在特殊场合下中断迭代，那就用 Array.every。</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">log</span>)</span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="comment">// Iterate over an array and break at a certain condition</span></div><div class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].every(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, arr</span>) </span>&#123;</div><div class="line">    log(element + <span class="string">' at index '</span> + index + <span class="string">' in array '</span> + arr);</div><div class="line">    <span class="keyword">if</span>(index !== <span class="number">5</span>) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="comment">// Defining a simple javascript object</span></div><div class="line">  <span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="string">'A'</span>,</div><div class="line">    <span class="attr">b</span>: <span class="string">'B'</span>,</div><div class="line">    <span class="string">'c-d-e'</span>: <span class="string">'CDE'</span></div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="comment">// Iterating over the object keys</span></div><div class="line">  <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">element, index, arr</span>) </span>&#123;</div><div class="line">    log(<span class="string">'Key '</span> + element + <span class="string">' has value '</span> + obj[element]);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">&#125;(<span class="built_in">window</span>.console.log));</div></pre></td></tr></table></figure>
<h4 id="不要使用-switch"><a href="#不要使用-switch" class="headerlink" title="不要使用 switch"></a>不要使用 switch</h4><p>switch 在所有的编程语言中都是个非常错误的难以控制的语句，建议用 if else 来替换它。</p>
<h4 id="数组和对象字面量"><a href="#数组和对象字面量" class="headerlink" title="数组和对象字面量"></a>数组和对象字面量</h4><p>用数组和对象字面量来代替数组和对象构造器。数组构造器很容易让人在它的参数上犯错。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Length is 3.</span></div><div class="line"><span class="keyword">var</span> a1 = <span class="keyword">new</span> <span class="built_in">Array</span>(x1, x2, x3);</div><div class="line"></div><div class="line"><span class="comment">// Length is 2.</span></div><div class="line"><span class="keyword">var</span> a2 = <span class="keyword">new</span> <span class="built_in">Array</span>(x1, x2);</div><div class="line"></div><div class="line"><span class="comment">// If x1 is a number and it is a natural number the length will be x1.</span></div><div class="line"><span class="comment">// If x1 is a number but not a natural number this will throw an exception.</span></div><div class="line"><span class="comment">// Otherwise the array will have one element with x1 as its value.</span></div><div class="line"><span class="keyword">var</span> a3 = <span class="keyword">new</span> <span class="built_in">Array</span>(x1);</div><div class="line"></div><div class="line"><span class="comment">// Length is 0.</span></div><div class="line"><span class="keyword">var</span> a4 = <span class="keyword">new</span> <span class="built_in">Array</span>();</div></pre></td></tr></table></figure>
<p>正因如此，如果将代码传参从两个变为一个，那数组很有可能发生意料不到的长度变化。为避免此类怪异状况，请总是采用更多可读的数组字面量。</p>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [x1, x2, x3];</div><div class="line"><span class="keyword">var</span> a2 = [x1, x2];</div><div class="line"><span class="keyword">var</span> a3 = [x1];</div><div class="line"><span class="keyword">var</span> a4 = [];</div></pre></td></tr></table></figure>
<p>对象构造器不会有类似的问题，但是为了可读性和统一性，我们应该使用对象字面量。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o2 = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">o2.a = <span class="number">0</span>;</div><div class="line">o2.b = <span class="number">1</span>;</div><div class="line">o2.c = <span class="number">2</span>;</div><div class="line">o2[<span class="string">'strange key'</span>] = <span class="number">3</span>;</div></pre></td></tr></table></figure>
<p>应该写成这样：</p>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o2 = &#123;</div><div class="line">  <span class="attr">a</span>: <span class="number">0</span>,</div><div class="line">  <span class="attr">b</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">c</span>: <span class="number">2</span>,</div><div class="line">  <span class="string">'strange key'</span>: <span class="number">3</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="修改内建对象的原型链"><a href="#修改内建对象的原型链" class="headerlink" title="修改内建对象的原型链"></a>修改内建对象的原型链</h4><p>修改内建的诸如 Object.prototype 和 Array.prototype 是被严厉禁止的。修改其它的内建对象比如 Function.prototype，虽危害没那么大，但始终还是会导致在开发过程中难以 debug 的问题，应当也要避免。</p>
<h4 id="自定义-toString-方法"><a href="#自定义-toString-方法" class="headerlink" title="自定义 toString() 方法"></a>自定义 toString() 方法</h4><p>你可以通过自定义 toString() 来控制对象字符串化。这很好，但你必须保证你的方法总是成功并不会有其它副作用。如果你的方法达不到这样的标准，那将会引发严重的问题。如果 toString() 调用了一个方法，这个方法做了一个断言[2] ，当断言失败，它可能会输出它所在对象的名称，当然对象也需要调用 toString()。</p>
<h4 id="圆括号"><a href="#圆括号" class="headerlink" title="圆括号"></a>圆括号</h4><p>一般在语法和语义上真正需要时才谨慎地使用圆括号。不要用在一元操作符上，例如 delete, typeof 和 void，或在关键字之后，例如 return, throw, case, new 等。</p>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>统一使用单引号(‘)，不使用双引号(“)。这在创建 HTML 字符串非常有好处：</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> msg = <span class="string">'This is some HTML &lt;div class="makes-sense"&gt;&lt;/div&gt;'</span>;</div></pre></td></tr></table></figure>
<h4 id="三元条件判断（if-的快捷方法）"><a href="#三元条件判断（if-的快捷方法）" class="headerlink" title="三元条件判断（if 的快捷方法）"></a>三元条件判断（if 的快捷方法）</h4><p>用三元操作符分配或返回语句。在比较简单的情况下使用，避免在复杂的情况下使用。没人愿意用 10 行三元操作符把自己的脑子绕晕。</p>
<p>不推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(x === <span class="number">10</span>) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'valid'</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'invalid'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>推荐</p>
<p>js 代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> x === <span class="number">10</span> ? <span class="string">'valid'</span> : <span class="string">'invalid'</span>;</div></pre></td></tr></table></figure>
<p>[1]：中缀符，指的是像 x + y 中的 +。</p>
<p>[2]：断言一般指程序员在测试测序时的假设，一般是一些布尔表达式，当返回是 true 时，断言为真，代码运行会继续进行；如果条件判断为 false，代码运行停止，你的应用被终止。</p>

				<!-- 多说评论框 start -->
				<div class="article-comment">
					<div class="ds-thread" data-num-items="5" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50" data-thread-key="post-codeStyle3" data-title="前端编码规范 3 —— JavaScript 规范" data-url="/"></div>
				</div>
				<!-- 多说评论框 end -->
			
		</div>
		<footer class="article-footer">
			<a data-url="https://utopia1991.github.io/2016/12/21/codeStyle3/" data-id="ciy0w2cb40005wbtd0zwkgtkt" class="article-share-link">分享</a>
			
			
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Code-Style/">Code Style</a></li></ul>

		</footer>
	</div>
	
		
<nav id="article-nav">
  
    <a href="/2016/12/21/codeStyle4/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          前端编码规范 4 —— CSS 和 SASS 规范
        
      </div>
    </a>
  
  
    <a href="/2016/12/21/codeStyle2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">前端编码规范 2 —— HTML 规范</div>
    </a>
  
</nav>

	
</article>



				</section>
			</div>
			<footer id="footer">
	
	<div class="outer">
		<div id="footer-info">
			Copyright &copy; Bevis Shen 2017<br>
			Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
		</div>
	</div>
</footer>

		</div>
		<nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">博文</a>
  
</nav>
		

<script src="https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

	</div>
</body>
<script>
	function backTop(){
		document.documentElement.scrollTop = document.body.scrollTop = 0;
	}

	var c = document.getElementsByTagName('canvas')[0],
		x = c.getContext('2d'),
		pr = window.devicePixelRatio || 1,
		w = window.innerWidth,
		h = window.innerHeight,
		f = 90,
		q,
		m = Math,
		r = 0,
		u = m.PI * 2,
		v = m.cos,
		z = m.random
	c.width = w * pr
	c.height = h * pr
	x.scale(pr, pr)
	x.globalAlpha = 0.6

	function i() {
		x.clearRect(0, 0, w, h)
		q = [{
			x: 0,
			y: h * .7 + f
		}, {
			x: 0,
			y: h * .7 - f
		}]
		while (q[1].x < w + f) d(q[0], q[1])
	}

	function d(i, j) {
		x.beginPath()
		x.moveTo(i.x, i.y)
		x.lineTo(j.x, j.y)
		var k = j.x + (z() * 2 - 0.25) * f,
			n = y(j.y)
		x.lineTo(k, n)
		x.closePath()
		r -= u / -50
		x.fillStyle = '#' + (v(r) * 127 + 128 << 16 | v(r + u / 3) * 127 + 128 << 8 | v(r + u / 3 * 2) * 127 + 128).toString(16)
		x.fill()
		q[0] = q[1]
		q[1] = {
			x: k,
			y: n
		}
	}

	function y(p) {
		var t = p + (z() * 2 - 1.1) * f
		return (t > h || t < 0) ? y(p) : t
	}
	document.onclick = i
	document.ontouchstart = i
	i()
</script>
<script type="text/javascript" color="255,0,0" opacity="0.6" count="99" src="https://utopia1991.github.io/js/canvas-nest.min.js"></script>
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
	var duoshuoQuery = {short_name:"bevis"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
</script>
<!-- 多说公共JS代码 end -->
</html>
